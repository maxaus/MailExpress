<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
<ui:composition>
    <h:form id="messageForm">
        <h:panelGrid columns="2">
            <h:outputLabel value="#{msg['subject']}" for="messageSubject"/>
            <h:inputText id="messageSubject" label="#{msg['subject']}" value="#{messageController.messageFormData.subject}"/>

            <h:outputLabel value="#{msg['to']}" for="messageReceivers"/>
            <h:inputText id="messageReceivers" label="#{msg['to']}" value="#{messageController.messageFormData.receivers}"
                         required="true">
                <f:converter converterId="stringListConverter"/>
                <f:validator validatorId="emailListValidator"/>
            </h:inputText>
            <h:outputText value="&lt;!-- --&gt;" escape="false"/>
            <h:outputText value="#{msg['email_tip']}" styleClass="tip-text"/>

            <h:outputLabel value="#{msg['copy']}" for="messageReceiverCopies"/>
            <h:inputText id="messageReceiverCopies" label="#{msg['copy']}" value="#{messageController.messageFormData.copies}">
                <f:converter converterId="stringListConverter"/>
                <f:validator validatorId="emailListValidator"/>
            </h:inputText>
            <h:outputText value="&lt;!-- --&gt;" escape="false"/>
            <h:outputText value="#{msg['email_tip']}" styleClass="tip-text"/>
        </h:panelGrid>
        <rich:messages ajaxRendered="true"/>

        <rich:editor id="messageBody" value="#{messageController.messageFormData.body}"/>
        <rich:fileUpload fileUploadListener="#{messageController.uploadListener}" id="upload"
                         acceptedTypes="jpg, gif, png, bmp"
                         ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');"
                         maxFilesQuantity="5" immediateUpload="true" addLabel="#{msg['add_attach']}"
                         serverErrorLabel="#{msg['file_upload_fail']}" style="width: 100%;height: 100px;"/>

        <a4j:commandButton action="#{messageController.send()}" value="#{msg['send']}"
                           render="msgList" oncomplete="#{rich:component('messagePane')}.hide()"/>
        <a4j:commandButton value="#{msg['cancel']}"
                           onclick="#{rich:component('messagePane')}.hide()"/>
    </h:form>
</ui:composition>
</html>